<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Gainput: /samples/gesture/gesturesample.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Gainput
   &#160;<span id="projectnumber">v1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">/samples/gesture/gesturesample.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>Shows how to use input gestures. Also shows how to implement your own custom input device. Uses the <a class="el" href="sample_fw.html">Sample Framework</a>.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;gainput/gainput.h&gt;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;../samplefw/SampleFramework.h&quot;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">enum</span> Button</div><div class="line">{</div><div class="line">    ButtonConfirm,</div><div class="line">    ButtonConfirmDouble,</div><div class="line">    ButtonConfirmExtra,</div><div class="line">    ButtonHoldGesture,</div><div class="line">    ButtonTapGesture,</div><div class="line">    ButtonPinching,</div><div class="line">    ButtonPinchScale,</div><div class="line">    ButtonRotating,</div><div class="line">    ButtonRotateAngle,</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">unsigned</span> TouchPointCount = 8;</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">unsigned</span> TouchDataElems = 4;</div><div class="line"></div><div class="line"><span class="keyword">class </span>MultiTouchEmulator : <span class="keyword">public</span> <a name="_a0"></a><a class="code" href="classgainput_1_1InputDevice.html">gainput::InputDevice</a></div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">    MultiTouchEmulator(<a name="_a1"></a><a class="code" href="classgainput_1_1InputManager.html">gainput::InputManager</a>&amp; manager, <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> device, <span class="keywordtype">unsigned</span> index, <a class="code" href="classgainput_1_1InputDevice.html#a70782f6fda773960e2146e5fc3bc5a22">gainput::InputDevice::DeviceVariant</a> variant) : </div><div class="line">        <a class="code" href="classgainput_1_1InputDevice.html">gainput::InputDevice</a>(manager, device, index == InputDevice::AutoIndex ? manager.<a name="a2"></a><a class="code" href="classgainput_1_1InputManager.html#a32f35bceeef887f04b3e4e61609ae0ce">GetDeviceCountByType</a>(DT_CUSTOM) : 0)</div><div class="line">    {</div><div class="line">        state_ = manager.<a name="a3"></a><a class="code" href="classgainput_1_1InputManager.html#a81b52a559ae5456e367818b8207884e0">GetAllocator</a>().<a name="a4"></a><a class="code" href="classgainput_1_1Allocator.html#a6dc281f2047871ed3a0f4837d4310d41">New</a>&lt;<a name="_a5"></a><a class="code" href="classgainput_1_1InputState.html">gainput::InputState</a>&gt;(manager.<a class="code" href="classgainput_1_1InputManager.html#a81b52a559ae5456e367818b8207884e0">GetAllocator</a>(), TouchPointCount*TouchDataElems);</div><div class="line">        GAINPUT_ASSERT(state_);</div><div class="line">        previousState_ = manager.<a class="code" href="classgainput_1_1InputManager.html#a81b52a559ae5456e367818b8207884e0">GetAllocator</a>().<a class="code" href="classgainput_1_1Allocator.html#a6dc281f2047871ed3a0f4837d4310d41">New</a>&lt;<a class="code" href="classgainput_1_1InputState.html">gainput::InputState</a>&gt;(manager.<a class="code" href="classgainput_1_1InputManager.html#a81b52a559ae5456e367818b8207884e0">GetAllocator</a>(), TouchPointCount*TouchDataElems);</div><div class="line">        GAINPUT_ASSERT(previousState_);</div><div class="line">    }</div><div class="line"></div><div class="line">    ~MultiTouchEmulator()</div><div class="line">    {</div><div class="line">        manager_.GetAllocator().Delete(state_);</div><div class="line">        manager_.GetAllocator().Delete(previousState_);</div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="keywordtype">void</span> Initialize(<a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> downDevice, <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> downButton,</div><div class="line">        <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> xAxisDevice, <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> xAxisButton,</div><div class="line">        <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> yAxisDevice, <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> yAxisButton,</div><div class="line">        <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> downDevice2, <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> downButton2,</div><div class="line">        <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> xAxisDevice2, <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> xAxisButton2,</div><div class="line">        <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> yAxisDevice2, <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> yAxisButton2)</div><div class="line">    {</div><div class="line">        isDown_ = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">        downDevice_ = downDevice;</div><div class="line">        downButton_ = downButton;</div><div class="line">        xAxisDevice_ = xAxisDevice;</div><div class="line">        xAxisButton_ = xAxisButton;</div><div class="line">        yAxisDevice_ = yAxisDevice;</div><div class="line">        yAxisButton_ = yAxisButton;</div><div class="line">        downDevice2_ = downDevice2;</div><div class="line">        downButton2_ = downButton2;</div><div class="line">        xAxisDevice2_ = xAxisDevice2;</div><div class="line">        xAxisButton2_ = xAxisButton2;</div><div class="line">        yAxisDevice2_ = yAxisDevice2;</div><div class="line">        yAxisButton2_ = yAxisButton2;</div><div class="line">    }</div><div class="line"></div><div class="line">    DeviceType <a name="a6"></a><a class="code" href="classgainput_1_1InputDevice.html#a54f02fe2a25db06c3cd5a486c0df22c3">GetType</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a name="a7"></a><a class="code" href="classgainput_1_1InputDevice.html#a4e851f5fda7f6db653f2aa9a15fede6aabafdca6cdabe89098c961ce57a954ea3">DT_CUSTOM</a>; }</div><div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* <a name="a8"></a><a class="code" href="classgainput_1_1InputDevice.html#a5937423f8a7a8807c26c35365b19c54f">GetTypeName</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <span class="stringliteral">&quot;custom&quot;</span>; }</div><div class="line"></div><div class="line">    <span class="keywordtype">bool</span> <a name="a9"></a><a class="code" href="classgainput_1_1InputDevice.html#a5cd54d96c15584cf330cd85de8447f6c">IsValidButtonId</a>(<a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> deviceButton)<span class="keyword"> const</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        <span class="keywordflow">return</span> deviceButton == gainput::Touch0Down</div><div class="line">            || deviceButton == gainput::Touch0X</div><div class="line">            || deviceButton == gainput::Touch0Y</div><div class="line">            || deviceButton == gainput::Touch1Down</div><div class="line">            || deviceButton == gainput::Touch1X</div><div class="line">            || deviceButton == gainput::Touch1Y;</div><div class="line">    }</div><div class="line"></div><div class="line">    <a class="code" href="namespacegainput.html#ac936962c0275954961d45e1d2c3222ed">gainput::ButtonType</a> <a name="a10"></a><a class="code" href="classgainput_1_1InputDevice.html#ab346dfaa04721a4944eeeae89d6b0fd4">GetButtonType</a>(<a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> deviceButton)<span class="keyword"> const</span></div><div class="line"><span class="keyword">    </span>{</div><div class="line">        GAINPUT_ASSERT(<a class="code" href="classgainput_1_1InputDevice.html#a5cd54d96c15584cf330cd85de8447f6c">IsValidButtonId</a>(deviceButton));</div><div class="line">        <span class="keywordflow">return</span> (deviceButton == gainput::Touch0Down || deviceButton == gainput::Touch1Down) ? <a name="a11"></a><a class="code" href="namespacegainput.html#ac936962c0275954961d45e1d2c3222edaf27ecb25022e1e454cf9f185993e5705">gainput::BT_BOOL</a> : <a name="a12"></a><a class="code" href="namespacegainput.html#ac936962c0275954961d45e1d2c3222eda265d18d6df1cb1b14aef0568f4ac7db9">gainput::BT_FLOAT</a>;</div><div class="line">    }</div><div class="line"></div><div class="line"><span class="keyword">protected</span>:</div><div class="line">    <span class="keywordtype">void</span> <a name="a13"></a><a class="code" href="classgainput_1_1InputDevice.html#abf4cb639524d9f727efaeb893c41f28d">InternalUpdate</a>(<a name="_a14"></a><a class="code" href="classgainput_1_1InputDeltaState.html">gainput::InputDeltaState</a>* delta)</div><div class="line">    {</div><div class="line">        <span class="keyword">const</span> <a class="code" href="classgainput_1_1InputDevice.html">gainput::InputDevice</a>* downDevice = manager_.GetDevice(downDevice_);</div><div class="line">        GAINPUT_ASSERT(downDevice);</div><div class="line">        <span class="keywordflow">if</span> (!downDevice-&gt;<a name="a15"></a><a class="code" href="classgainput_1_1InputDevice.html#aa11598fe51584979751fc3437e7426f2">GetBool</a>(downButton_) &amp;&amp; downDevice-&gt;<a name="a16"></a><a class="code" href="classgainput_1_1InputDevice.html#acd56a986a168200b54dc9cf1d4bc7d3b">GetBoolPrevious</a>(downButton_))</div><div class="line">        {</div><div class="line">            isDown_ = !isDown_;</div><div class="line">            <span class="keyword">const</span> <a class="code" href="classgainput_1_1InputDevice.html">gainput::InputDevice</a>* xDevice = manager_.GetDevice(xAxisDevice_);</div><div class="line">            GAINPUT_ASSERT(xDevice);</div><div class="line">            x_ = xDevice-&gt;<a name="a17"></a><a class="code" href="classgainput_1_1InputDevice.html#afa6e82bc12708dde6fafee888cbea248">GetFloat</a>(xAxisButton_);</div><div class="line">            <span class="keyword">const</span> <a class="code" href="classgainput_1_1InputDevice.html">gainput::InputDevice</a>* yDevice = manager_.GetDevice(yAxisDevice_);</div><div class="line">            GAINPUT_ASSERT(yDevice);</div><div class="line">            y_ = yDevice-&gt;<a class="code" href="classgainput_1_1InputDevice.html#afa6e82bc12708dde6fafee888cbea248">GetFloat</a>(yAxisButton_);</div><div class="line">        }</div><div class="line"></div><div class="line">        state_-&gt;Set(gainput::Touch1Down, isDown_);</div><div class="line">        state_-&gt;Set(gainput::Touch1X, x_);</div><div class="line">        state_-&gt;Set(gainput::Touch1Y, y_);</div><div class="line"></div><div class="line">        <span class="keyword">const</span> <a class="code" href="classgainput_1_1InputDevice.html">gainput::InputDevice</a>* downDevice2 = manager_.GetDevice(downDevice2_);</div><div class="line">        GAINPUT_ASSERT(downDevice2);</div><div class="line">        <span class="keyword">const</span> <a class="code" href="classgainput_1_1InputDevice.html">gainput::InputDevice</a>* xDevice2 = manager_.GetDevice(xAxisDevice2_);</div><div class="line">        GAINPUT_ASSERT(xDevice2);</div><div class="line">        <span class="keyword">const</span> <a class="code" href="classgainput_1_1InputDevice.html">gainput::InputDevice</a>* yDevice2 = manager_.GetDevice(yAxisDevice2_);</div><div class="line">        GAINPUT_ASSERT(yDevice2);</div><div class="line">        state_-&gt;Set(gainput::Touch0Down, downDevice2-&gt;<a class="code" href="classgainput_1_1InputDevice.html#aa11598fe51584979751fc3437e7426f2">GetBool</a>(downButton2_));</div><div class="line">        state_-&gt;Set(gainput::Touch0X, xDevice2-&gt;<a class="code" href="classgainput_1_1InputDevice.html#afa6e82bc12708dde6fafee888cbea248">GetFloat</a>(xAxisButton2_));</div><div class="line">        state_-&gt;Set(gainput::Touch0Y, yDevice2-&gt;<a class="code" href="classgainput_1_1InputDevice.html#afa6e82bc12708dde6fafee888cbea248">GetFloat</a>(yAxisButton2_));</div><div class="line">    }</div><div class="line"></div><div class="line">    DeviceState <a name="a18"></a><a class="code" href="classgainput_1_1InputDevice.html#a471810c3bdb2a0b550c73dd7aa4b7335">InternalGetState</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a name="a19"></a><a class="code" href="classgainput_1_1InputDevice.html#a39157bf78af48ac2c0cb4482c81716aaa017a7969e291594851f1c2ffeedeee5f">DS_OK</a>; }</div><div class="line"></div><div class="line"><span class="keyword">private</span>:</div><div class="line">    <span class="keywordtype">bool</span> isDown_;</div><div class="line">    <span class="keywordtype">float</span> x_;</div><div class="line">    <span class="keywordtype">float</span> y_;</div><div class="line">    <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> downDevice_;</div><div class="line">    <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> downButton_;</div><div class="line">    <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> xAxisDevice_;</div><div class="line">    <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> xAxisButton_;</div><div class="line">    <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> yAxisDevice_;</div><div class="line">    <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> yAxisButton_;</div><div class="line">    <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> downDevice2_;</div><div class="line">    <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> downButton2_;</div><div class="line">    <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> xAxisDevice2_;</div><div class="line">    <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> xAxisButton2_;</div><div class="line">    <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> yAxisDevice2_;</div><div class="line">    <a class="code" href="namespacegainput.html#a60ad61a221a28f20361a12c0dc027c3e">gainput::DeviceButtonId</a> yAxisButton2_;</div><div class="line">};</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">void</span> SampleMain()</div><div class="line">{</div><div class="line">    SfwOpenWindow(<span class="stringliteral">&quot;Gainput: Gesture sample&quot;</span>);</div><div class="line"></div><div class="line">    <a name="_a20"></a><a class="code" href="classgainput_1_1TrackingAllocator.html">gainput::TrackingAllocator</a> allocator(<a name="a21"></a><a class="code" href="namespacegainput.html#aaa0fe77c7e298a795417319ff58a9eb2">gainput::GetDefaultAllocator</a>());</div><div class="line"></div><div class="line">    <a class="code" href="classgainput_1_1InputManager.html">gainput::InputManager</a> manager(<span class="keyword">true</span>, allocator);</div><div class="line"></div><div class="line">    <span class="keyword">const</span> <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> keyboardId = manager.<a name="a22"></a><a class="code" href="classgainput_1_1InputManager.html#a60fb20a8a134b659e0e47a298cd59390">CreateDevice</a>&lt;<a name="_a23"></a><a class="code" href="classgainput_1_1InputDeviceKeyboard.html">gainput::InputDeviceKeyboard</a>&gt;();</div><div class="line">    <span class="keyword">const</span> <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> mouseId = manager.<a class="code" href="classgainput_1_1InputManager.html#a60fb20a8a134b659e0e47a298cd59390">CreateDevice</a>&lt;<a name="_a24"></a><a class="code" href="classgainput_1_1InputDeviceMouse.html">gainput::InputDeviceMouse</a>&gt;();</div><div class="line"></div><div class="line">    <a name="_a25"></a><a class="code" href="classgainput_1_1InputDeviceTouch.html">gainput::InputDeviceTouch</a>* touchDevice = manager.<a name="a26"></a><a class="code" href="classgainput_1_1InputManager.html#a962d3647dc05311d210cd20607a34dfd">CreateAndGetDevice</a>&lt;<a class="code" href="classgainput_1_1InputDeviceTouch.html">gainput::InputDeviceTouch</a>&gt;();</div><div class="line">    GAINPUT_ASSERT(touchDevice);</div><div class="line">    <a class="code" href="namespacegainput.html#adddb432e0e83ff3d018e7ce4bf50e753">gainput::DeviceId</a> touchId = touchDevice-&gt;GetDeviceId();</div><div class="line"></div><div class="line"><span class="preprocessor">#if defined(GAINPUT_PLATFORM_LINUX) || defined(GAINPUT_PLATFORM_WIN)</span></div><div class="line">    manager.<a name="a27"></a><a class="code" href="classgainput_1_1InputManager.html#a5814f29c09362547c66b59993a23b031">SetDisplaySize</a>(SfwGetWidth(), SfwGetHeight());</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">    SfwSetInputManager(&amp;manager);</div><div class="line"></div><div class="line">    <a name="_a28"></a><a class="code" href="classgainput_1_1InputMap.html">gainput::InputMap</a> map(manager, <span class="stringliteral">&quot;testmap&quot;</span>, allocator);</div><div class="line"></div><div class="line">    map.<a name="a29"></a><a class="code" href="classgainput_1_1InputMap.html#acd8e038d6d839b056b834fcfccc2cbfd">MapBool</a>(ButtonConfirm, mouseId, gainput::MouseButtonLeft);</div><div class="line"></div><div class="line">    <a name="_a30"></a><a class="code" href="classgainput_1_1DoubleClickGesture.html">gainput::DoubleClickGesture</a>* dcg = manager.<a class="code" href="classgainput_1_1InputManager.html#a962d3647dc05311d210cd20607a34dfd">CreateAndGetDevice</a>&lt;<a class="code" href="classgainput_1_1DoubleClickGesture.html">gainput::DoubleClickGesture</a>&gt;();</div><div class="line">    GAINPUT_ASSERT(dcg);</div><div class="line">    dcg-&gt;<a name="a31"></a><a class="code" href="classgainput_1_1DoubleClickGesture.html#ae0e89104c061bc2f9558dd1563a12aee">Initialize</a>(mouseId, gainput::MouseButtonLeft,</div><div class="line">            mouseId, gainput::MouseAxisX, 0.01f,</div><div class="line">            mouseId, gainput::MouseAxisY, 0.01f,</div><div class="line">            500);</div><div class="line">    map.<a class="code" href="classgainput_1_1InputMap.html#acd8e038d6d839b056b834fcfccc2cbfd">MapBool</a>(ButtonConfirmDouble, dcg-&gt;<a name="a32"></a><a class="code" href="classgainput_1_1InputDevice.html#afd81a6361f93cd94946ea2b5b870b85a">GetDeviceId</a>(), <a name="a33"></a><a class="code" href="namespacegainput.html#a2dd97693aa7da4c0d94e56bdc7211d38a9961bae8429020339c1bd3c96e90c03e">gainput::DoubleClickTriggered</a>);</div><div class="line"></div><div class="line">    <a name="_a34"></a><a class="code" href="classgainput_1_1SimultaneouslyDownGesture.html">gainput::SimultaneouslyDownGesture</a>* sdg = manager.<a class="code" href="classgainput_1_1InputManager.html#a962d3647dc05311d210cd20607a34dfd">CreateAndGetDevice</a>&lt;<a class="code" href="classgainput_1_1SimultaneouslyDownGesture.html">gainput::SimultaneouslyDownGesture</a>&gt;();</div><div class="line">    GAINPUT_ASSERT(sdg);</div><div class="line">    sdg-&gt;<a name="a35"></a><a class="code" href="classgainput_1_1SimultaneouslyDownGesture.html#a7dbeaa8da9da60000fd07a149c85e95c">AddButton</a>(mouseId, gainput::MouseButtonLeft);</div><div class="line">    sdg-&gt;<a class="code" href="classgainput_1_1SimultaneouslyDownGesture.html#a7dbeaa8da9da60000fd07a149c85e95c">AddButton</a>(keyboardId, gainput::KeyShiftL);</div><div class="line">    map.<a class="code" href="classgainput_1_1InputMap.html#acd8e038d6d839b056b834fcfccc2cbfd">MapBool</a>(ButtonConfirmExtra, sdg-&gt;<a class="code" href="classgainput_1_1InputDevice.html#afd81a6361f93cd94946ea2b5b870b85a">GetDeviceId</a>(), <a name="a36"></a><a class="code" href="namespacegainput.html#a5d56fad0a562c92ce3c9b337b760cb21ad074ff1508e9a8242afc0d7f388634da">gainput::SimultaneouslyDownTriggered</a>);</div><div class="line"></div><div class="line">    MultiTouchEmulator* mte = manager.<a class="code" href="classgainput_1_1InputManager.html#a962d3647dc05311d210cd20607a34dfd">CreateAndGetDevice</a>&lt;MultiTouchEmulator&gt;();</div><div class="line">    mte-&gt;Initialize(sdg-&gt;<a class="code" href="classgainput_1_1InputDevice.html#afd81a6361f93cd94946ea2b5b870b85a">GetDeviceId</a>(), <a class="code" href="namespacegainput.html#a5d56fad0a562c92ce3c9b337b760cb21ad074ff1508e9a8242afc0d7f388634da">gainput::SimultaneouslyDownTriggered</a>,</div><div class="line">            mouseId, gainput::MouseAxisX,</div><div class="line">            mouseId, gainput::MouseAxisY,</div><div class="line">            mouseId, gainput::MouseButtonLeft,</div><div class="line">            mouseId, gainput::MouseAxisX,</div><div class="line">            mouseId, gainput::MouseAxisY);</div><div class="line"></div><div class="line">    <span class="keywordflow">if</span> (!touchDevice-&gt;IsAvailable() || touchDevice-&gt;GetVariant() == <a name="a37"></a><a class="code" href="classgainput_1_1InputDevice.html#a70782f6fda773960e2146e5fc3bc5a22a2e6f1d9432f3b79e33457cfc7d4a2c25">gainput::InputDevice::DV_NULL</a>)</div><div class="line">    {</div><div class="line">        touchId = mte-&gt;GetDeviceId();</div><div class="line">    }</div><div class="line"></div><div class="line">    <a name="_a38"></a><a class="code" href="classgainput_1_1HoldGesture.html">gainput::HoldGesture</a>* hg = manager.<a class="code" href="classgainput_1_1InputManager.html#a962d3647dc05311d210cd20607a34dfd">CreateAndGetDevice</a>&lt;<a class="code" href="classgainput_1_1HoldGesture.html">gainput::HoldGesture</a>&gt;();</div><div class="line">    GAINPUT_ASSERT(hg);</div><div class="line">    hg-&gt;<a name="a39"></a><a class="code" href="classgainput_1_1HoldGesture.html#a331af269518956db8c91bd72aeca759d">Initialize</a>(touchId, gainput::Touch0Down,</div><div class="line">            touchId, gainput::Touch0X, 0.1f,</div><div class="line">            touchId, gainput::Touch0Y, 0.1f,</div><div class="line">            <span class="keyword">true</span>,</div><div class="line">            800);</div><div class="line">    map.<a class="code" href="classgainput_1_1InputMap.html#acd8e038d6d839b056b834fcfccc2cbfd">MapBool</a>(ButtonHoldGesture, hg-&gt;<a class="code" href="classgainput_1_1InputDevice.html#afd81a6361f93cd94946ea2b5b870b85a">GetDeviceId</a>(), <a name="a40"></a><a class="code" href="namespacegainput.html#ac0d063ec5d8ccf6aa5229f6184a04d34a807c32d3a450f6d56da91350dcf246e8">gainput::HoldTriggered</a>);</div><div class="line"></div><div class="line">    <a name="_a41"></a><a class="code" href="classgainput_1_1TapGesture.html">gainput::TapGesture</a>* tg = manager.<a class="code" href="classgainput_1_1InputManager.html#a962d3647dc05311d210cd20607a34dfd">CreateAndGetDevice</a>&lt;<a class="code" href="classgainput_1_1TapGesture.html">gainput::TapGesture</a>&gt;();</div><div class="line">    GAINPUT_ASSERT(tg);</div><div class="line">    tg-&gt;<a name="a42"></a><a class="code" href="classgainput_1_1TapGesture.html#a1b4aabf7941403c921655d171e82015f">Initialize</a>(touchId, gainput::Touch0Down,</div><div class="line">            500);</div><div class="line">    map.<a class="code" href="classgainput_1_1InputMap.html#acd8e038d6d839b056b834fcfccc2cbfd">MapBool</a>(ButtonTapGesture, tg-&gt;<a class="code" href="classgainput_1_1InputDevice.html#afd81a6361f93cd94946ea2b5b870b85a">GetDeviceId</a>(), <a name="a43"></a><a class="code" href="namespacegainput.html#a9fa7d46c5f665fc163caeb36a4da55abad13a2b96c735217f6739019f3de8d9c3">gainput::TapTriggered</a>);</div><div class="line">    </div><div class="line">    <a name="_a44"></a><a class="code" href="classgainput_1_1PinchGesture.html">gainput::PinchGesture</a>* pg = manager.<a class="code" href="classgainput_1_1InputManager.html#a962d3647dc05311d210cd20607a34dfd">CreateAndGetDevice</a>&lt;<a class="code" href="classgainput_1_1PinchGesture.html">gainput::PinchGesture</a>&gt;();</div><div class="line">    GAINPUT_ASSERT(pg);</div><div class="line">    pg-&gt;<a name="a45"></a><a class="code" href="classgainput_1_1PinchGesture.html#a1cc8833ba6c0058fafbfbf80458449df">Initialize</a>(touchId, gainput::Touch0Down,</div><div class="line">            touchId, gainput::Touch0X,</div><div class="line">            touchId, gainput::Touch0Y,</div><div class="line">            touchId, gainput::Touch1Down,</div><div class="line">            touchId, gainput::Touch1X,</div><div class="line">            touchId, gainput::Touch1Y);</div><div class="line">    map.<a class="code" href="classgainput_1_1InputMap.html#acd8e038d6d839b056b834fcfccc2cbfd">MapBool</a>(ButtonPinching, pg-&gt;<a class="code" href="classgainput_1_1InputDevice.html#afd81a6361f93cd94946ea2b5b870b85a">GetDeviceId</a>(), <a name="a46"></a><a class="code" href="namespacegainput.html#a2afbae28940bf2248ff9fbbec40dd4c6a3db6962fd2b78fc7653a8a96dd82f836">gainput::PinchTriggered</a>);</div><div class="line">    map.<a name="a47"></a><a class="code" href="classgainput_1_1InputMap.html#aeb633a5529852198ddf51dff31767ec6">MapFloat</a>(ButtonPinchScale, pg-&gt;<a class="code" href="classgainput_1_1InputDevice.html#afd81a6361f93cd94946ea2b5b870b85a">GetDeviceId</a>(), <a name="a48"></a><a class="code" href="namespacegainput.html#a2afbae28940bf2248ff9fbbec40dd4c6aea4a62695a7a8a61995133d5912f5f28">gainput::PinchScale</a>);</div><div class="line"></div><div class="line">    <a name="_a49"></a><a class="code" href="classgainput_1_1RotateGesture.html">gainput::RotateGesture</a>* rg = manager.<a class="code" href="classgainput_1_1InputManager.html#a962d3647dc05311d210cd20607a34dfd">CreateAndGetDevice</a>&lt;<a class="code" href="classgainput_1_1RotateGesture.html">gainput::RotateGesture</a>&gt;();</div><div class="line">    GAINPUT_ASSERT(rg);</div><div class="line">    rg-&gt;<a name="a50"></a><a class="code" href="classgainput_1_1RotateGesture.html#aacb8dcb177487f0703a57c698abef9d7">Initialize</a>(touchId, gainput::Touch0Down,</div><div class="line">            touchId, gainput::Touch0X,</div><div class="line">            touchId, gainput::Touch0Y,</div><div class="line">            touchId, gainput::Touch1Down,</div><div class="line">            touchId, gainput::Touch1X,</div><div class="line">            touchId, gainput::Touch1Y);</div><div class="line">    map.<a class="code" href="classgainput_1_1InputMap.html#acd8e038d6d839b056b834fcfccc2cbfd">MapBool</a>(ButtonRotating, rg-&gt;<a class="code" href="classgainput_1_1InputDevice.html#afd81a6361f93cd94946ea2b5b870b85a">GetDeviceId</a>(), <a name="a51"></a><a class="code" href="namespacegainput.html#a11a95a3465d715788d69720f8f3dc5a5aaad7bfabdd27ab8ffcd2e579b81aca83">gainput::RotateTriggered</a>);</div><div class="line">    map.<a class="code" href="classgainput_1_1InputMap.html#aeb633a5529852198ddf51dff31767ec6">MapFloat</a>(ButtonRotateAngle, rg-&gt;<a class="code" href="classgainput_1_1InputDevice.html#afd81a6361f93cd94946ea2b5b870b85a">GetDeviceId</a>(), <a name="a52"></a><a class="code" href="namespacegainput.html#a11a95a3465d715788d69720f8f3dc5a5a5efacd966f2a504843726517b7997c72">gainput::RotateAngle</a>);</div><div class="line"></div><div class="line">    <span class="keywordtype">bool</span> doExit = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">while</span> (!SfwIsDone() &amp;&amp; !doExit)</div><div class="line">    {</div><div class="line">        manager.<a name="a53"></a><a class="code" href="classgainput_1_1InputManager.html#a3cfcd26de850329177519a281df4f023">Update</a>();</div><div class="line"></div><div class="line"><span class="preprocessor">#if defined(GAINPUT_PLATFORM_LINUX)</span></div><div class="line">        XEvent event;</div><div class="line">        <span class="keywordflow">while</span> (XPending(SfwGetXDisplay()))</div><div class="line">        {</div><div class="line">            XNextEvent(SfwGetXDisplay(), &amp;event);</div><div class="line">            manager.<a name="a54"></a><a class="code" href="classgainput_1_1InputManager.html#af41c221bda26b6efeee1d8d1af602398">HandleEvent</a>(event);</div><div class="line">            <span class="keywordflow">if</span> (event.type == DestroyNotify || event.type == ClientMessage)</div><div class="line">            {</div><div class="line">                doExit = <span class="keyword">true</span>;</div><div class="line">            }</div><div class="line">        }</div><div class="line"><span class="preprocessor">#elif defined(GAINPUT_PLATFORM_WIN)</span></div><div class="line">        MSG msg;</div><div class="line">        <span class="keywordflow">while</span> (PeekMessage(&amp;msg, SfwGetHWnd(),  0, 0, PM_REMOVE))</div><div class="line">        {</div><div class="line">            TranslateMessage(&amp;msg);</div><div class="line">            DispatchMessage(&amp;msg);</div><div class="line">            manager.<a name="a55"></a><a class="code" href="classgainput_1_1InputManager.html#abc3450565c648dfbd805094188ddebcc">HandleMessage</a>(msg);</div><div class="line">        }</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line">        SfwUpdate();</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (map.<a name="a56"></a><a class="code" href="classgainput_1_1InputMap.html#a504b51cf99c36298e3fb27a591f7352f">GetBoolWasDown</a>(ButtonConfirm))</div><div class="line">        {</div><div class="line">            SFW_LOG(<span class="stringliteral">&quot;Confirmed!\n&quot;</span>);</div><div class="line">            SFW_LOG(<span class="stringliteral">&quot;Memory: %u allocs, %u deallocs, %u used bytes\n&quot;</span>, static_cast&lt;unsigned&gt;(allocator.<a name="a57"></a>GetAllocateCount()), static_cast&lt;unsigned&gt;(allocator.<a name="a58"></a>GetDeallocateCount()), static_cast&lt;unsigned&gt;(allocator.<a name="a59"></a>GetAllocatedMemory()));</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (map.<a class="code" href="classgainput_1_1InputMap.html#a504b51cf99c36298e3fb27a591f7352f">GetBoolWasDown</a>(ButtonConfirmDouble))</div><div class="line">        {</div><div class="line">            SFW_LOG(<span class="stringliteral">&quot;Confirmed doubly!\n&quot;</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (map.<a class="code" href="classgainput_1_1InputMap.html#a504b51cf99c36298e3fb27a591f7352f">GetBoolWasDown</a>(ButtonConfirmExtra))</div><div class="line">        {</div><div class="line">            SFW_LOG(<span class="stringliteral">&quot;Confirmed alternatively!\n&quot;</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (map.<a name="a60"></a><a class="code" href="classgainput_1_1InputMap.html#a83c4ed0d643660e826f8ee3e6dabf0e6">GetBool</a>(ButtonHoldGesture))</div><div class="line">        {</div><div class="line">            SFW_LOG(<span class="stringliteral">&quot;Hold triggered!\n&quot;</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (map.<a class="code" href="classgainput_1_1InputMap.html#a504b51cf99c36298e3fb27a591f7352f">GetBoolWasDown</a>(ButtonTapGesture))</div><div class="line">        {</div><div class="line">            SFW_LOG(<span class="stringliteral">&quot;Tapped!\n&quot;</span>);</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (map.<a class="code" href="classgainput_1_1InputMap.html#a83c4ed0d643660e826f8ee3e6dabf0e6">GetBool</a>(ButtonPinching))</div><div class="line">        {</div><div class="line">            SFW_LOG(<span class="stringliteral">&quot;Pinching: %f\n&quot;</span>, map.<a name="a61"></a><a class="code" href="classgainput_1_1InputMap.html#a4a12f05f3ecf89dc9b467014b9bd60e6">GetFloat</a>(ButtonPinchScale));</div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="keywordflow">if</span> (map.<a class="code" href="classgainput_1_1InputMap.html#a83c4ed0d643660e826f8ee3e6dabf0e6">GetBool</a>(ButtonRotating))</div><div class="line">        {</div><div class="line">            SFW_LOG(<span class="stringliteral">&quot;Rotation angle: %f\n&quot;</span>, map.<a class="code" href="classgainput_1_1InputMap.html#a4a12f05f3ecf89dc9b467014b9bd60e6">GetFloat</a>(ButtonRotateAngle));</div><div class="line">        }</div><div class="line">    }</div><div class="line"></div><div class="line">    SfwCloseWindow();</div><div class="line">}</div><div class="line"></div><div class="line"></div></div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Sep 6 2017 20:47:59 for Gainput by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
